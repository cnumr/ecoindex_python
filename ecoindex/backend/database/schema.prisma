datasource db {
    provider = "sqlite"
    url      = "file:dev.db"
}

generator db {
    provider             = "prisma-client-py"
    interface            = "asyncio"
    recursive_type_depth = 5
}

model Ecoindex {
    id                    String    @id @default(cuid())
    date                  DateTime  @default(now())
    url                   String
    host                  String
    width                 Int
    height                Int
    size                  Float
    nodes                 Int
    requests              Int
    grade                 String
    score                 Float
    ges                   Float
    water                 Float
    page_type             String
    initial_ranking       Int
    initial_total_results Int
    version               Int
    ecoindex_version      String
    requests_details      Request[]

    @@index([url, host, date(sort: Desc)])
    @@map("api_ecoindex")
}

model Request {
    id          String    @id @default(cuid())
    url         String
    type        String
    size        Float
    ecoindex    Ecoindex? @relation(fields: [ecoindex_id], references: [id])
    ecoindex_id String?

    @@map("requests_details")
}
